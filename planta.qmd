---
title: "üå± Planta Index"
subtitle: "Tally completo dos sinais que formam o √≠ndice"
---

```{python}
#| label: setup
#| message: false
#| warning: false

import json
from pathlib import Path
from collections import defaultdict
import pandas as pd
import plotly.express as px
import sys

sys.path.append(str(Path("scripts").resolve()))
from data_utils import require_clean_manual_events, REACTION_EMOJI

require_clean_manual_events()

PLANT_INDEX_FILE = Path("data/derived/plant_index.json")
MANUAL_EVENTS_FILE = Path("data/manual_events.json")
AUTO_EVENTS_FILE = Path("data/derived/auto_events.json")
SINCERAO_FILE = Path("data/derived/sincerao_edges.json")
PARTICIPANTS_INDEX_FILE = Path("data/derived/participants_index.json")
PAREDOES_FILE = Path("data/paredoes.json")
INDEX_DATA_FILE = Path("data/derived/index_data.json")

plant_index = json.loads(PLANT_INDEX_FILE.read_text(encoding="utf-8")) if PLANT_INDEX_FILE.exists() else {}
manual_events = json.loads(MANUAL_EVENTS_FILE.read_text(encoding="utf-8")) if MANUAL_EVENTS_FILE.exists() else {}
auto_events = json.loads(AUTO_EVENTS_FILE.read_text(encoding="utf-8")) if AUTO_EVENTS_FILE.exists() else {}
sinc_data = json.loads(SINCERAO_FILE.read_text(encoding="utf-8")) if SINCERAO_FILE.exists() else {}
participants_index = json.loads(PARTICIPANTS_INDEX_FILE.read_text(encoding="utf-8")) if PARTICIPANTS_INDEX_FILE.exists() else {}
paredoes = json.loads(PAREDOES_FILE.read_text(encoding="utf-8")) if PAREDOES_FILE.exists() else {}
index_data = json.loads(INDEX_DATA_FILE.read_text(encoding="utf-8")) if INDEX_DATA_FILE.exists() else {}

latest_week = plant_index.get("latest", {}).get("week")
latest_scores = plant_index.get("latest", {}).get("scores", {})
weights = plant_index.get("_metadata", {}).get("weights", {})
rolling_window = plant_index.get("_metadata", {}).get("rolling_window", 3)
emoji_cap = plant_index.get("_metadata", {}).get("emoji_cap", 0.30)
bonus_plateia = plant_index.get("_metadata", {}).get("bonus_plateia", 15)

avatars = {p["name"]: p.get("avatar", "") for p in participants_index.get("participants", []) if p.get("name")}
active_names = {p["name"] for p in participants_index.get("participants", []) if p.get("name") and p.get("active", True)}

def split_names(value):
    if not value or not isinstance(value, str):
        return []
    if " + " in value:
        return [v.strip() for v in value.split(" + ") if v.strip()]
    return [value.strip()]

def week_has_signals(week_entry):
    if not week_entry:
        return False
    for info in week_entry.get("scores", {}).values():
        raw = info.get("raw", {})
        if raw.get("power_events", 0) > 0:
            return True
        if raw.get("sincerao_edges", 0) > 0:
            return True
        if raw.get("plateia_planta"):
            return True
    return False

display_week = latest_week
display_scores = latest_scores
if plant_index.get("weeks"):
    # choose latest week with any signals if current week is empty
    latest_entry = next((w for w in plant_index.get("weeks", []) if w.get("week") == latest_week), None)
    if latest_entry and not week_has_signals(latest_entry):
        candidates = [w for w in plant_index.get("weeks", []) if week_has_signals(w)]
        if candidates:
            chosen = sorted(candidates, key=lambda w: w.get("week", 0))[-1]
            display_week = chosen.get("week")
            display_scores = chosen.get("scores", {})

if active_names and display_scores:
    display_scores = {k: v for k, v in display_scores.items() if k in active_names}

POWER_EVENT_LABELS = {
    "lider": "L√≠der",
    "anjo": "Anjo",
    "monstro": "Monstro",
    "imunidade": "Imunidade",
    "indicacao": "Indica√ß√£o",
    "contragolpe": "Contragolpe",
    "voto_duplo": "Voto 2x",
    "voto_anulado": "Voto anulado",
    "perdeu_voto": "Perdeu voto",
    "emparedado": "Emparedado",
    "volta_paredao": "Voltou do pared√£o",
}
POWER_EVENT_EMOJI = {
    "lider": "üëë",
    "anjo": "üòá",
    "monstro": "üëπ",
    "imunidade": "üõ°Ô∏è",
    "indicacao": "üéØ",
    "contragolpe": "üåÄ",
    "voto_duplo": "üó≥Ô∏è",
    "voto_anulado": "üö´",
    "perdeu_voto": "‚õî",
    "emparedado": "üìå",
    "volta_paredao": "üîÑ",
}

POWER_ACTIVITY_WEIGHTS = {
    "lider": {"actor": 0.0, "target": 4.0},
    "anjo": {"actor": 0.0, "target": 3.0},
    "imunidade": {"actor": 0.0, "target": 0.4},
    "monstro": {"actor": 0.0, "target": 3.0},
    "indicacao": {"actor": 2.5, "target": 1.5},
    "contragolpe": {"actor": 2.5, "target": 1.5},
    "voto_duplo": {"actor": 2.0, "target": 0.0},
    "voto_anulado": {"actor": 2.0, "target": 0.0},
    "perdeu_voto": {"actor": 0.0, "target": 1.0},
    "emparedado": {"actor": 0.0, "target": 0.0},
    "volta_paredao": {"actor": 0.0, "target": 2.0},
}

power_events = (manual_events.get("power_events", []) if manual_events else []) + (auto_events.get("events", []) if auto_events else [])
for p in paredoes.get("paredoes", []):
    resultado = p.get("resultado") or {}
    eliminado = resultado.get("eliminado")
    semana = p.get("semana")
    data = p.get("data")
    for item in p.get("indicados_finais", []):
        nome = item.get("nome")
        if not nome or (eliminado and nome == eliminado):
            continue
        power_events.append({
            "date": data,
            "week": semana,
            "type": "volta_paredao",
            "actor": None,
            "target": nome,
            "detail": "Voltou do pared√£o",
            "origem": "derived",
            "source": "paredoes",
        })
power_by_person = defaultdict(list)
power_events_by_person = defaultdict(list)
for ev in power_events:
    if display_week and ev.get("week") != display_week:
        continue
    etype = ev.get("type")
    label = POWER_EVENT_LABELS.get(etype, etype)
    emoji = POWER_EVENT_EMOJI.get(etype, "‚Ä¢")
    date = ev.get("date", "")
    actor = ev.get("actor")
    target = ev.get("target")
    if actor and target and actor == target:
        power_by_person[actor].append(f"{emoji} {label} (auto) ‚Äî {date}")
        actor_w = POWER_ACTIVITY_WEIGHTS.get(etype, {}).get("actor", 0.0)
        target_w = POWER_ACTIVITY_WEIGHTS.get(etype, {}).get("target", 0.0)
        w = actor_w if actor_w > 0 else target_w
        power_events_by_person[actor].append({
            "label": label,
            "role": "auto",
            "weight": w,
            "date": date,
            "other": "",
        })
    elif actor:
        power_by_person[actor].append(f"{emoji} {label} (ator) ‚Äî {date}")
        w = POWER_ACTIVITY_WEIGHTS.get(etype, {}).get("actor", 0.0)
        power_events_by_person[actor].append({
            "label": label,
            "role": "ator",
            "weight": w,
            "date": date,
            "other": target,
        })
    if target and (not actor or actor != target):
        power_by_person[target].append(f"{emoji} {label} (alvo) ‚Äî {date}")
        w = POWER_ACTIVITY_WEIGHTS.get(etype, {}).get("target", 0.0)
        power_events_by_person[target].append({
            "label": label,
            "role": "alvo",
            "weight": w,
            "date": date,
            "other": actor,
        })

power_event_types = sorted({ev.get("type") for ev in power_events if ev.get("type")})

power_by_person_all = defaultdict(list)
for ev in power_events:
    etype = ev.get("type")
    label = POWER_EVENT_LABELS.get(etype, etype)
    emoji = POWER_EVENT_EMOJI.get(etype, "‚Ä¢")
    date = ev.get("date", "")
    actors = split_names(ev.get("actor"))
    targets = split_names(ev.get("target"))
    if len(actors) == 1 and len(targets) == 1 and actors[0] == targets[0]:
        power_by_person_all[actors[0]].append(f"{emoji} {label} (auto) ‚Äî {date}")
        continue
    for actor in actors:
        power_by_person_all[actor].append(f"{emoji} {label} (ator) ‚Äî {date}")
    for target in targets:
        power_by_person_all[target].append(f"{emoji} {label} (alvo) ‚Äî {date}")

sinc_week_data = next((w for w in sinc_data.get("weeks", []) if w.get("week") == display_week), {})
sinc_participacao = set(sinc_week_data.get("participacao", []) or [])
planta_plateia_target = (sinc_week_data.get("planta") or {}).get("target")
sinc_edges = [e for e in sinc_data.get("edges", []) if e.get("week") == display_week]

sinc_by_person = defaultdict(list)
for edge in sinc_edges:
    etype = edge.get("type")
    label = {
        "podio": "P√≥dio",
        "nao_ganha": "N√£o ganha",
        "bomba": "Bomba",
    }.get(etype, etype)
    actor = edge.get("actor")
    target = edge.get("target")
    if actor:
        tema = edge.get("tema")
        tema_txt = f" ({tema})" if tema else ""
        sinc_by_person[actor].append(f"{label} ‚Üí {target}{tema_txt}")
    if target:
        tema = edge.get("tema")
        tema_txt = f" ({tema})" if tema else ""
        sinc_by_person[target].append(f"{label} ‚Üê {actor}{tema_txt}")
```

## Como o Planta Index √© calculado

<p class="text-muted">Resumo dos componentes e pesos usados no √≠ndice.</p>

```{python}
#| label: formula
#| output: asis

if not display_week:
    print("<p class='text-muted'>Sem dados suficientes para o Planta Index.</p>")
else:
    df_w = pd.DataFrame([
        {"Componente": k, "Peso": v}
        for k, v in weights.items()
    ])
    print(f"<p><strong>Semana exibida:</strong> {display_week}. Rolling m√©dio: {rolling_window} semanas.</p>")
    if display_week != latest_week:
        print(f"<p class='text-muted'>Semana {latest_week} n√£o teve eventos; mostrando a √∫ltima semana com sinais.</p>")
    print("<p>Score = soma dos componentes (0‚Äì100) + b√¥nus de plateia (se existir), limitado entre 0 e 100.</p>")
    print(f"<p>Emoji üå± usa a <strong>m√©dia di√°ria</strong> da semana e √© limitado a {emoji_cap*100:.0f}% do peso total. B√¥nus plateia: +{bonus_plateia} pontos.</p>")
    print(df_w.to_html(index=False, classes="table table-dark table-sm", border=0))
```

**Defini√ß√µes r√°pidas dos componentes**
- **Invisibilidade**: posi√ß√£o relativa (percentil) do total de rea√ß√µes recebidas+dadas na semana (**peso 0 no score**).
- **Baixa atividade de poder**: usa **pesos por tipo** (ganhar L√≠der/Anjo vale mais que eventos menores).
- **Baixa exposi√ß√£o no Sincer√£o**: edges do Sincer√£o normalizados (quanto menor, mais ‚Äúplanta‚Äù).
- **Emoji üå±**: m√©dia di√°ria da propor√ß√£o de ‚ÄúPlanta‚Äù recebida (cap em 30% do peso total).
- **Plateia definiu planta**: b√¥nus manual quando existir no Sincer√£o.
- **Nota importante:** indica√ß√µes/contragolpes **contam para quem indicou** e tamb√©m **para quem recebeu** (peso menor).

## Eventos considerados no Planta Index

<p class="text-muted">Tipos de eventos de poder que entram no c√°lculo.</p>

**Eventos de poder (manual + API) que entram na contagem:**
```{python}
#| label: plant-events-list
#| output: asis

if not power_event_types:
    print("<p class='text-muted'>Sem eventos de poder registrados.</p>")
else:
    labels = list(dict.fromkeys(POWER_EVENT_LABELS.values()))
    print("<p>" + ", ".join(labels) + "</p>")
```

**Pesos de atividade (exemplos):**
- L√≠der (ganhou): **4.0**
- Anjo (ganhou): **3.0**
- Monstro (recebeu): **3.0**
- Imunidade: **0.4**
- Indica√ß√£o / Contragolpe (ator): **2.5**
- Indica√ß√£o / Contragolpe (alvo): **1.5**
- Voto 2x / Voto anulado (ator): **2.0**
- Perdeu voto (alvo): **1.0**

## Eventos da semana (poderes)

<p class="text-muted">Lista cronol√≥gica dos eventos da semana exibida.</p>

```{python}
#| label: plant-week-events
#| output: asis

if not plant_index.get("weeks"):
    print("<p class='text-muted'>Sem eventos registrados.</p>")
else:
    wk = display_week
    week_events = [e for e in power_events if e.get("week") == wk]
    if not week_events:
        print("<p class='text-muted'>Nenhum evento de poder registrado nesta semana.</p>")
    else:
        rows = []
        for ev in sorted(week_events, key=lambda x: (x.get("date", ""), x.get("type", ""))):
            etype = ev.get("type")
            label = POWER_EVENT_LABELS.get(etype, etype)
            emoji = POWER_EVENT_EMOJI.get(etype, "‚Ä¢")
            rows.append({
                "Data": ev.get("date", ""),
                "Evento": f"{emoji} {label}",
                "Ator": ev.get("actor") or "‚Äî",
                "Alvo": ev.get("target") or "‚Äî",
                "Origem": ev.get("origem") or "‚Äî",
            })
        df_week = pd.DataFrame(rows)
        print(df_week.to_html(index=False, classes="table table-dark table-sm", border=0))
```

## Participantes com eventos de poder na semana

<p class="text-muted">Quem teve eventos de poder na semana exibida.</p>

```{python}
#| label: plant-power-summary
#| output: asis

power_rows = []
for name, events in power_by_person.items():
    if not events:
        continue
    power_rows.append({
        "Participante": name,
        "Eventos": " ¬∑ ".join(events),
    })

if not power_rows:
    print("<p class='text-muted'>Nenhum evento de poder registrado na semana.</p>")
else:
    df_power = pd.DataFrame(power_rows).sort_values("Participante")
    print(df_power.to_html(index=False, classes="table table-dark table-sm", border=0))
```

## Participantes com eventos de poder (temporada)

<p class="text-muted">Acumulado de eventos de poder ao longo da temporada.</p>

```{python}
#| label: plant-power-all
#| output: asis

power_rows_all = []
for name, events in power_by_person_all.items():
    if not events:
        continue
    if active_names and name not in active_names:
        continue
    power_rows_all.append({
        "Participante": name,
        "Eventos": " ¬∑ ".join(events),
        "Total": len(events),
    })

if not power_rows_all:
    print("<p class='text-muted'>Nenhum evento de poder registrado.</p>")
else:
    df_power_all = pd.DataFrame(power_rows_all).sort_values("Total", ascending=False)
    print(df_power_all.to_html(index=False, classes="table table-dark table-sm", border=0))
```

## Participantes com exposi√ß√£o no Sincer√£o (edges da semana)

<p class="text-muted">Edges do Sincer√£o registrados na semana exibida.</p>

```{python}
#| label: plant-sinc-summary
#| output: asis

sinc_rows = []
for name, events in sinc_by_person.items():
    if not events:
        continue
    sinc_rows.append({
        "Participante": name,
        "Edges": " ¬∑ ".join(events),
    })

if not sinc_rows:
    print("<p class='text-muted'>Nenhum edge do Sincer√£o registrado na semana.</p>")
else:
    df_sinc = pd.DataFrame(sinc_rows).sort_values("Participante")
    print(df_sinc.to_html(index=False, classes="table table-dark table-sm", border=0))
```

## Contradi√ß√µes da semana (Sincer√£o negativo + ‚ù§Ô∏è)

<p class="text-muted">Casos em que houve Sincer√£o negativo + ‚ù§Ô∏è no Querid√¥metro.</p>

```{python}
#| label: sinc-contradictions
#| output: asis

sinc_meta = index_data.get("sincerao", {}) if isinstance(index_data, dict) else {}
pairs = sinc_meta.get("pairs", {}) if isinstance(sinc_meta, dict) else {}
contrad = pairs.get("contradictions") or []
if not sinc_meta.get("week"):
    print("<p class='text-muted'>Sem dados de Sincer√£o agregados nesta semana.</p>")
elif not contrad:
    print("<p class='text-muted'>Nenhuma contradi√ß√£o encontrada na semana.</p>")
else:
    rows = []
    for item in contrad:
        tipo = item.get("tipo")
        label = "N√£o ganha" if tipo == "nao_ganha" else ("Bomba" if tipo == "bomba" else tipo)
        rxn = item.get("reacao") or ""
        rxn_txt = REACTION_EMOJI.get(rxn, rxn or "‚Äî")
        rows.append({
            "Ator": item.get("ator"),
            "Alvo": item.get("alvo"),
            "Sincer√£o": label,
            "Querid√¥metro": rxn_txt,
            "Tema": item.get("tema") or "‚Äî",
        })
    df = pd.DataFrame(rows)
    print(df.to_html(index=False, classes="table table-dark table-sm", border=0))
```

## Alinhamento Sincer√£o √ó Querid√¥metro (Top 5)

<p class="text-muted">Ranking de alinhamento entre Sincer√£o e Querid√¥metro na semana usada.</p>

```{python}
#| label: sinc-alignment
#| output: asis

sinc_meta = index_data.get("sincerao", {}) if isinstance(index_data, dict) else {}
pairs = sinc_meta.get("pairs", {}) if isinstance(sinc_meta, dict) else {}
aligned_pos = pairs.get("aligned_pos") or []
aligned_neg = pairs.get("aligned_neg") or []
if not sinc_meta.get("week"):
    print("<p class='text-muted'>Sem dados de Sincer√£o agregados nesta semana.</p>")
else:
    if not aligned_pos and not aligned_neg:
        print("<p class='text-muted'>Sem alinhamentos registrados nesta semana.</p>")
    else:
        print(f"<p class='text-muted'>Semana usada: {sinc_meta.get('week')}</p>")
        if aligned_pos:
            rows = []
            for item in aligned_pos[:5]:
                rxn = item.get("reacao") or ""
                rxn_txt = REACTION_EMOJI.get(rxn, rxn or "‚Äî")
                rows.append({
                    "Ator": item.get("ator"),
                    "Alvo": item.get("alvo"),
                    "Sincer√£o": "P√≥dio",
                    "Querid√¥metro": rxn_txt,
                    "Tema": item.get("tema") or "‚Äî",
                })
            df_pos = pd.DataFrame(rows)
            print("<h4>Top 5 alinhados (p√≥dio + ‚ù§Ô∏è)</h4>")
            print(df_pos.to_html(index=False, classes='table table-dark table-sm', border=0))
        if aligned_neg:
            rows = []
            for item in aligned_neg[:5]:
                tipo = item.get("tipo")
                label = "N√£o ganha" if tipo == "nao_ganha" else ("Bomba" if tipo == "bomba" else tipo)
                rxn = item.get("reacao") or ""
                rxn_txt = REACTION_EMOJI.get(rxn, rxn or "‚Äî")
                rows.append({
                    "Ator": item.get("ator"),
                    "Alvo": item.get("alvo"),
                    "Sincer√£o": label,
                    "Querid√¥metro": rxn_txt,
                    "Tema": item.get("tema") or "‚Äî",
                })
            df_neg = pd.DataFrame(rows)
            print("<h4>Top 5 alinhados (negativo + rea√ß√£o negativa)</h4>")
            print(df_neg.to_html(index=False, classes='table table-dark table-sm', border=0))
```

## Tally completo por participante (semana atual)

<p class="text-muted">Tabela completa com score e componentes da semana exibida.</p>

```{python}
#| label: plant-table
#| output: asis

rows = []
print(f"<p class='text-muted'>Semana exibida: {display_week}</p>")
for name, info in display_scores.items():
    breakdown = {b["label"]: b.get("points", 0) for b in info.get("breakdown", [])}
    raw = info.get("raw", {})
    plant_ratio = 0
    if raw.get("reactions_received"):
        plant_ratio = round((raw.get("plant_received", 0) / raw.get("reactions_received", 1)) * 100, 1)
    rows.append({
        "Participante": name,
        "Score (rolling)": info.get("rolling", info.get("score", 0)),
        "Score (semana)": info.get("score", 0),
        "Invisibilidade": breakdown.get("Invisibilidade", 0),
        "Baixa atividade": breakdown.get("Baixa atividade de poder", 0),
        "Baixa exposi√ß√£o Sincer√£o": breakdown.get("Baixa exposi√ß√£o no Sincer√£o", 0),
        "Emoji üå±": breakdown.get("Emoji üå±", 0),
        "B√¥nus plateia": breakdown.get("Plateia definiu planta", 0),
        "Atividade poder": raw.get("power_activity", 0),
        "Sincer√£o edges": raw.get("sincerao_edges", 0),
        "Sincer√£o atividade": raw.get("sincerao_activity", 0),
        "Sincer√£o": "Sim" if raw.get("sincerao_participation") else "N√£o",
        "üå± recebidos": raw.get("plant_received", 0),
        "üå± %": plant_ratio,
    })

if not rows:
    print("<p class='text-muted'>Sem dados do Planta Index.</p>")
else:
    df = pd.DataFrame(rows).sort_values("Score (rolling)", ascending=False)
    print(df.to_html(index=False, classes="table table-dark table-sm", border=0))
```


## Detalhes por participante (eventos e sinais)

<p class="text-muted">Clique para ver o detalhamento por participante.</p>

```{python}
#| label: plant-details
#| output: asis

if not display_scores:
    print("<p class='text-muted'>Sem dados dispon√≠veis.</p>")
else:
    for name in sorted(display_scores.keys()):
        info = display_scores[name]
        breakdown = info.get("breakdown", [])
        raw = info.get("raw", {})
        power_list = power_by_person.get(name, [])
        sinc_list = sinc_by_person.get(name, [])
        sinc_part = raw.get("sincerao_participation")
        sinc_label = "participou" if sinc_part else ("ausente" if sinc_part is False else "n/a")
        plateia_flag = " (plateia)" if planta_plateia_target == name else ""
        power_detail = power_events_by_person.get(name, [])

        print(f"<details style='margin: 0.6rem 0; background:#2a2a2a; border-radius:8px; padding:0.5rem 0.8rem;'>")
        print(f"<summary style='cursor:pointer; font-weight:600;'>üå± {name} ‚Äî Planta Index {info.get('rolling', info.get('score'))}</summary>")
        print("<div style='margin-top:0.5rem; font-size:0.9rem;'>")
        print("<strong>Componentes e pontos:</strong>")
        print("<ul>")
        for item in breakdown:
            print(f"<li>{item.get('label')}: +{item.get('points', 0)}</li>")
        print("</ul>")
        comps = info.get("components", {})
        print("<div style='margin-top:0.4rem;'><strong>Componentes (0‚Äì1):</strong></div>")
        print("<div style='margin-left:1rem; color:#bbb;'>"
              f"Invisibilidade {comps.get('invisibility', 0)} ¬∑ "
              f"Baixa atividade {comps.get('low_power_events', 0)} ¬∑ "
              f"Baixa exposi√ß√£o Sincer√£o {comps.get('low_sincerao', 0)} ¬∑ "
              f"Emoji üå± {comps.get('plant_emoji', 0)}</div>")
        print(f"<div><strong>Atividade de poder:</strong> {raw.get('power_activity', 0)} (eventos: {raw.get('power_events', 0)})</div>")
        if power_list:
            print("<div style='margin-left:1rem; color:#bbb;'>" + " ¬∑ ".join(power_list) + "</div>")
        else:
            print("<div style='margin-left:1rem; color:#777;'>Nenhum evento de poder na semana.</div>")
        if power_detail:
            print("<div style='margin-left:1rem; color:#aaa; font-size:0.85rem;'><strong>Pesos por evento:</strong></div>")
            for evd in power_detail:
                other = f" ‚Üí {evd.get('other')}" if evd.get("other") else ""
                print(f"<div style='margin-left:1.6rem; color:#999; font-size:0.82rem;'>+{evd.get('weight',0)} {evd.get('label')} ({evd.get('role')}){other}</div>")
        print(f"<div><strong>Sincer√£o:</strong> {sinc_label}{plateia_flag} (edges: {raw.get('sincerao_edges', 0)}, atividade: {raw.get('sincerao_activity', 0)})</div>")
        if sinc_list:
            print("<div style='margin-left:1rem; color:#bbb;'>" + " ¬∑ ".join(sinc_list) + "</div>")
        else:
            print("<div style='margin-left:1rem; color:#777;'>Nenhum edge registrado.</div>")
        if sinc_part:
            print("<div style='margin-left:1.6rem; color:#999; font-size:0.82rem;'>+1.0 participa√ß√£o</div>")
        for _ in range(raw.get('sincerao_edges', 0)):
            print("<div style='margin-left:1.6rem; color:#999; font-size:0.82rem;'>+0.5 edge</div>")
        print(f"<div><strong>Emoji üå± recebidos:</strong> {raw.get('plant_received', 0)}</div>")
        print("</div></details>")
```
